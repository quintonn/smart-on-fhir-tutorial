<div class="card">
    <div class="card-header">
        Allergies & Adverse Reactions
    </div>

    <div class="card-body" ng-if="$ctrl.loading == true">
        <div class="progress">
            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
        </div>
        <p>Loading...</p>
    </div>

    <div class="card-body" ng-if="$ctrl.ready == true">
        <div class="accordion" id="allergyAccordion">
            <div class="card" ng-repeat="item in $ctrl.getAllergies()">
                <button class="btn btn-primary" type="button" ng-click="$ctrl.select(item)">
                    {{item.substance.coding[0].display}}
                </button>
                <div ng-if="item.selected == true" >
                    <div class="card-body">
                        <dl class="row">
                            <dt class="col-sm-6">Substance</dt>
                            <dd class="col-sm-6">{{item.substance.coding[0].display}}</dd>
                            <dt class="col-sm-6">Status</dt>
                            <dd class="col-sm-6">{{item.status}}</dd>
                            <dt class="col-sm-6">Category</dt>
                            <dd class="col-sm-6">{{item.category}}</dd>
                            <dt class="col-sm-6">Criticality</dt>
                            <dd class="col-sm-6">{{item.criticality}}</dd>
                        </dl>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card-body" ng-if="$ctrl.error != ''">
        <div class="alert alert-danger" role="alert">
            {{$ctrl.error}}
        </div>
    </div>
</div>